<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>d2l-dropdown basic tests</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
		<script src="../../webcomponentsjs/webcomponents-lite.js"></script>
		<script src="../../web-component-tester/browser.js"></script>
		<link rel="import" href="../dropdown.html">
	</head>
	<body>
		<button id="opener">opener</button>

		<test-fixture id="ClosedDropdown">
			<template>
				<d2l-dropdown id="dropdown" target-id="opener" >
					<p>Lorem ipsum dolor sit...</p>
				</d2l-dropdown>
			</template>
		</test-fixture>

		<test-fixture id="OpenDropdown">
			<template>
				<d2l-dropdown id="dropdown" target-id="opener" open>
					<p>Lorem ipsum dolor sit...</p>
				</d2l-dropdown>
			</template>
		</test-fixture>
		<script>

		describe('<d2l-dropdown>', function() {

			describe('closed', function() {

				var dropdown;

				beforeEach(function() {
					dropdown = fixture('ClosedDropdown');
				});

				it('distributes its children', function() {
					var content = dropdown.getContentChildren();
					expect(content.length).to.equal(1);
					expect(content[0]).to.equal(dropdown.querySelector('p'));
				});

				it('should fire open event when open attribute is added', function(done) {
					dropdown.addEventListener('open', function() {
						done();
					});
					dropdown.setAttribute('open', true);
				});

			});

			describe('open', function() {

				var dropdown;

				beforeEach(function() {
					dropdown = fixture('OpenDropdown');
				});

				it('should fire close event when open attribute is removed', function(done) {
					dropdown.addEventListener('close', function() {
						done();
					});
					dropdown.removeAttribute('open');
				});

			});

		});
		</script>
	</body>
</html>
