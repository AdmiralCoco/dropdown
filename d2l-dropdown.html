<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="d2l-dropdown-opener-behavior.html">

<dom-module id="d2l-dropdown">
	<template>
		<style include="d2l-dropdown-opener-styles"></style>
			<content></content>
	</template>
	<script>
		Polymer({
			is: 'd2l-dropdown',

			behaviors: [
				window.D2L.PolymerBehaviors.DropdownOpenerBehavior
			],

			listeners: {
				'click': '_onClick'
			},

			getOpener: function() {
				return this.queryEffectiveChildren('.d2l-dropdown-opener');
			},

			_onClick: function(e) {
				if (!Polymer.dom(e).rootTarget.classList.contains('d2l-dropdown-opener')) {
					return;
				}
				var content = this.queryEffectiveChildren('d2l-dropdown-content');
				if (!content) {
					content = this.queryEffectiveChildren('d2l-dropdown-menu');
					if (!content) {
						return;
					}
				}

				if (content.opened) {
					content.close();
				} else {
					content.open();
				}
			}

		});
	</script>
</dom-module>
